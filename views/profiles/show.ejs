<%- include('../partials/html-head') %>
<%- include('../partials/nav') %>

<main>
  <% if (isSelf || user?.isAdmin)  { %>
  <div class="screen-left">
  <h1> Requests</h1>
  <% if (tasks.length) { %>
    <div class="card-container">
      <% tasks.forEach(task => { %>
        <div class="card">
            <h4>
              <% if (task?.fulfilled === false) { %><i style="color:#C44900" class="fa-solid fa-clock"></i><% } %>
              <% if (task?.fulfilled === true) { %><i style="color:#7cc400" class="fa-solid fa-list-check"></i><% } %>
              <%= task.name %>
            </h4>
            <div>Notes:
              <%= task.details %>
            </div>
            <span><i style="display: inline; float: left; margin-right: 5px" class="fa-regular fa-calendar-days"></i><p>3/22/2023</p></span>
            <div>
              <a class="view-eye" href='/tasks/<%= task._id %>'><i class="Eye"></i></a>
            </div>
        </div>
      <% }) %>
    </div>
  <% } else { %>
    <p>will appear here.</p>
  <% } %>  
  </div>
  <div class="task-form">
    <h2>Add Request</h2>
    <form action="/tasks" method="POST">
        <label>
          <input type="text" name="name" autocomplete="off" placeholder="Task">
        </label>
        <label>
          <textarea name="details" autocomplete="off" placeholder="Notes"></textarea>
        </label>
          <button type="submit">Add</button>
    </form>
  </div>
<% } %>

</main>


<%- include('../partials/footer') %>